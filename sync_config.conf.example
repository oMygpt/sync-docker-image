#!/bin/bash
# Docker镜像同步系统配置文件示例
# 复制此文件为 sync_config.conf 并根据需要修改配置

# =============================================================================
# 基本配置
# =============================================================================

# 最大重试次数（推荐: 3-5）
MAX_RETRIES=3

# 重试间隔时间（秒，推荐: 5-10）
RETRY_DELAY=5

# 详细输出模式（true/false）
VERBOSE=false

# 干运行模式（true/false，用于测试）
DRY_RUN=false

# 强制执行模式（true/false，跳过某些检查）
FORCE=false

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别（DEBUG, INFO, WARN, ERROR）
LOG_LEVEL=INFO

# 日志文件前缀
LOG_PREFIX="sync_"

# 日志文件保留天数
LOG_RETENTION_DAYS=7

# 是否启用彩色输出（true/false）
COLOR_OUTPUT=true

# =============================================================================
# 网络和超时配置
# =============================================================================

# 网络连接超时时间（秒）
NETWORK_TIMEOUT=30

# Docker拉取超时时间（秒）
PULL_TIMEOUT=600

# Docker推送超时时间（秒）
PUSH_TIMEOUT=900

# 网络检查重试次数
NETWORK_CHECK_RETRIES=3

# =============================================================================
# 错误处理配置
# =============================================================================

# 遇到错误时是否立即退出（true/false）
FAIL_FAST=true

# 是否在错误时发送通知（true/false）
ERROR_NOTIFICATION=false

# 错误通知邮箱（如果启用通知）
# ERROR_EMAIL="admin@example.com"

# 错误通知Webhook URL（如果启用通知）
# ERROR_WEBHOOK_URL="https://hooks.slack.com/services/xxx/xxx/xxx"

# 是否保存错误镜像列表（true/false）
SAVE_FAILED_IMAGES=true

# 失败镜像列表文件名
FAILED_IMAGES_FILE="failed_images.txt"

# =============================================================================
# 镜像处理配置
# =============================================================================

# 是否在成功后清理本地镜像（true/false）
CLEANUP_ON_SUCCESS=true

# 是否在失败后清理本地镜像（true/false）
CLEANUP_ON_FAILURE=false

# 镜像验证模式（none, basic, full）
# none: 不验证
# basic: 基本格式验证
# full: 完整验证（包括远程检查）
IMAGE_VALIDATION=basic

# 是否跳过已存在的镜像（true/false）
SKIP_EXISTING=true

# =============================================================================
# 并发和性能配置
# =============================================================================

# 最大并发同步数（推荐: 3-5）
MAX_PARALLEL=3

# 单个镜像最大处理时间（秒）
MAX_PROCESSING_TIME=1800

# 是否启用进度条（true/false）
SHOW_PROGRESS=true

# 进度条更新间隔（秒）
PROGRESS_UPDATE_INTERVAL=1

# =============================================================================
# 存储和备份配置
# =============================================================================

# 历史记录文件名
HISTORY_FILE="transfer_history.md"

# 是否启用历史记录备份（true/false）
BACKUP_HISTORY=true

# 历史记录备份保留数量
HISTORY_BACKUP_COUNT=10

# 临时文件目录
TEMP_DIR="/tmp/docker_sync"

# =============================================================================
# 镜像仓库配置
# =============================================================================

# 默认源仓库
DEFAULT_SOURCE_REGISTRY="docker.io"

# 默认目标仓库前缀（请根据实际情况修改）
# DEFAULT_TARGET_PREFIX="registry.cn-hangzhou.aliyuncs.com/your-namespace"

# 镜像标签处理策略（keep, latest, custom）
# keep: 保持原标签
# latest: 统一使用latest标签
# custom: 使用自定义标签格式
TAG_STRATEGY=keep

# 自定义标签格式（当TAG_STRATEGY=custom时使用）
# 支持变量: {original_tag}, {date}, {timestamp}
# CUSTOM_TAG_FORMAT="{original_tag}-{date}"

# =============================================================================
# 监控和报告配置
# =============================================================================

# 是否启用性能监控（true/false）
ENABLE_MONITORING=false

# 监控数据输出格式（json, csv, prometheus）
MONITORING_FORMAT=json

# 监控数据文件名
MONITORING_FILE="sync_metrics.json"

# 是否生成同步报告（true/false）
GENERATE_REPORT=true

# 报告格式（markdown, html, json）
REPORT_FORMAT=markdown

# 报告文件名前缀
REPORT_PREFIX="sync_report_"

# =============================================================================
# 高级配置
# =============================================================================

# Docker命令路径
DOCKER_CMD="docker"

# 是否使用Docker Buildx（true/false）
USE_BUILDX=false

# Docker配置目录
DOCKER_CONFIG_DIR="~/.docker"

# 是否启用实验性功能（true/false）
ENABLE_EXPERIMENTAL=false

# 自定义Docker daemon socket路径
# DOCKER_HOST="unix:///var/run/docker.sock"

# =============================================================================
# 环境特定配置
# =============================================================================

# 运行环境（development, staging, production）
ENVIRONMENT=development

# 是否在开发环境中启用调试模式（true/false）
DEBUG_MODE=true

# 生产环境安全检查（true/false）
PRODUCTION_SAFETY_CHECKS=true

# =============================================================================
# 用户自定义配置
# =============================================================================

# 在此处添加您的自定义配置选项
# 例如:
# MY_CUSTOM_OPTION="value"
# TEAM_NOTIFICATION_URL="https://example.com/webhook"

# =============================================================================
# 配置文件版本信息
# =============================================================================

# 配置文件版本
CONFIG_VERSION="1.0.0"

# 最后更新时间
LAST_UPDATED="2024-01-15 10:00:00"

# =============================================================================
# 使用说明
# =============================================================================

# 1. 复制此文件为 sync_config.conf
# 2. 根据您的需求修改上述配置
# 3. 确保配置文件有正确的权限
# 4. 运行脚本时会自动加载配置
#
# 注意事项:
# - 布尔值请使用 true/false
# - 数字值不需要引号
# - 字符串值建议使用双引号
# - 注释行以 # 开头
# - 空行会被忽略
#
# 更多信息请参考项目文档