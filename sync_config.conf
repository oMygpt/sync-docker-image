#!/bin/bash
# Docker镜像同步系统配置文件
# 此文件包含同步脚本的所有配置选项

# =============================================================================
# 基本配置
# =============================================================================

# 最大重试次数（默认: 3）
MAX_RETRIES=3

# 重试间隔时间（秒，默认: 5）
RETRY_DELAY=5

# 详细输出模式（true/false，默认: false）
VERBOSE=false

# 干运行模式（true/false，默认: false）
DRY_RUN=false

# 强制执行模式（true/false，默认: false）
FORCE=false

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别（DEBUG, INFO, WARN, ERROR，默认: INFO）
LOG_LEVEL=INFO

# 日志文件前缀（默认: sync_）
LOG_PREFIX="sync_"

# 日志文件保留天数（默认: 7）
LOG_RETENTION_DAYS=7

# 是否启用彩色输出（true/false，默认: true）
COLOR_OUTPUT=true

# =============================================================================
# 网络和超时配置
# =============================================================================

# 网络连接超时时间（秒，默认: 30）
NETWORK_TIMEOUT=30

# Docker拉取超时时间（秒，默认: 600）
PULL_TIMEOUT=600

# Docker推送超时时间（秒，默认: 900）
PUSH_TIMEOUT=900

# 网络检查重试次数（默认: 3）
NETWORK_CHECK_RETRIES=3

# =============================================================================
# 错误处理配置
# =============================================================================

# 遇到错误时是否立即退出（true/false，默认: true）
FAIL_FAST=true

# 是否在错误时发送通知（true/false，默认: false）
ERROR_NOTIFICATION=false

# 错误通知邮箱（如果启用通知）
# ERROR_EMAIL="admin@example.com"

# 错误通知Webhook URL（如果启用通知）
# ERROR_WEBHOOK_URL="https://hooks.slack.com/services/xxx/xxx/xxx"

# 是否保存错误镜像列表（true/false，默认: true）
SAVE_FAILED_IMAGES=true

# 失败镜像列表文件名（默认: failed_images.txt）
FAILED_IMAGES_FILE="failed_images.txt"

# =============================================================================
# 镜像处理配置
# =============================================================================

# 是否在成功后清理本地镜像（true/false，默认: true）
CLEANUP_ON_SUCCESS=true

# 是否在失败后清理本地镜像（true/false，默认: false）
CLEANUP_ON_FAILURE=false

# 镜像验证模式（none, basic, full，默认: basic）
# none: 不验证
# basic: 基本格式验证
# full: 完整验证（包括远程检查）
IMAGE_VALIDATION=basic

# 是否跳过已存在的镜像（true/false，默认: true）
SKIP_EXISTING=true

# =============================================================================
# 并发和性能配置
# =============================================================================

# 最大并发同步数（默认: 3）
MAX_PARALLEL=3

# 单个镜像最大处理时间（秒，默认: 1800）
MAX_PROCESSING_TIME=1800

# 是否启用进度条（true/false，默认: true）
SHOW_PROGRESS=true

# 进度条更新间隔（秒，默认: 1）
PROGRESS_UPDATE_INTERVAL=1

# =============================================================================
# 存储和备份配置
# =============================================================================

# 历史记录文件名（默认: transfer_history.md）
HISTORY_FILE="transfer_history.md"

# 是否启用历史记录备份（true/false，默认: true）
BACKUP_HISTORY=true

# 历史记录备份保留数量（默认: 10）
HISTORY_BACKUP_COUNT=10

# 临时文件目录（默认: /tmp/docker_sync）
TEMP_DIR="/tmp/docker_sync"

# =============================================================================
# 安全配置
# =============================================================================

# 是否验证镜像签名（true/false，默认: false）
VERIFY_SIGNATURES=false

# 是否扫描镜像漏洞（true/false，默认: false）
SCAN_VULNERABILITIES=false

# 漏洞扫描工具（trivy, clair，默认: trivy）
VULN_SCANNER=trivy

# 最大允许的漏洞等级（LOW, MEDIUM, HIGH, CRITICAL，默认: HIGH）
MAX_VULN_LEVEL=HIGH

# =============================================================================
# 镜像仓库配置
# =============================================================================

# 默认源仓库（默认: docker.io）
DEFAULT_SOURCE_REGISTRY="docker.io"

# 默认目标仓库前缀
# DEFAULT_TARGET_PREFIX="registry.cn-hangzhou.aliyuncs.com/namespace"

# 镜像标签处理策略（keep, latest, custom，默认: keep）
# keep: 保持原标签
# latest: 统一使用latest标签
# custom: 使用自定义标签格式
TAG_STRATEGY=keep

# 自定义标签格式（当TAG_STRATEGY=custom时使用）
# 支持变量: {original_tag}, {date}, {timestamp}
# CUSTOM_TAG_FORMAT="{original_tag}-{date}"

# =============================================================================
# 监控和报告配置
# =============================================================================

# 是否启用性能监控（true/false，默认: false）
ENABLE_MONITORING=false

# 监控数据输出格式（json, csv, prometheus，默认: json）
MONITORING_FORMAT=json

# 监控数据文件名（默认: sync_metrics.json）
MONITORING_FILE="sync_metrics.json"

# 是否生成同步报告（true/false，默认: true）
GENERATE_REPORT=true

# 报告格式（markdown, html, json，默认: markdown）
REPORT_FORMAT=markdown

# 报告文件名前缀（默认: sync_report_）
REPORT_PREFIX="sync_report_"

# =============================================================================
# 高级配置
# =============================================================================

# Docker命令路径（默认: docker）
DOCKER_CMD="docker"

# 是否使用Docker Buildx（true/false，默认: false）
USE_BUILDX=false

# Docker配置目录（默认: ~/.docker）
DOCKER_CONFIG_DIR="~/.docker"

# 是否启用实验性功能（true/false，默认: false）
ENABLE_EXPERIMENTAL=false

# 自定义Docker daemon socket路径
# DOCKER_HOST="unix:///var/run/docker.sock"

# =============================================================================
# 环境特定配置
# =============================================================================

# 运行环境（development, staging, production，默认: development）
ENVIRONMENT=development

# 是否在开发环境中启用调试模式（true/false，默认: true）
DEBUG_MODE=true

# 生产环境安全检查（true/false，默认: true）
PRODUCTION_SAFETY_CHECKS=true

# =============================================================================
# 用户自定义配置
# =============================================================================

# 在此处添加您的自定义配置选项
# 例如:
# MY_CUSTOM_OPTION="value"
# TEAM_NOTIFICATION_URL="https://example.com/webhook"

# =============================================================================
# 配置文件版本信息
# =============================================================================

# 配置文件版本
CONFIG_VERSION="1.0.0"

# 最后更新时间
LAST_UPDATED="$(date '+%Y-%m-%d %H:%M:%S')"

# 配置文件说明
# 此配置文件用于Docker镜像同步系统的增强版脚本
# 修改配置后，请确保重新加载或重启相关服务
# 更多信息请参考项目文档